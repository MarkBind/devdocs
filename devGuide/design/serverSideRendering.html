<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 5.0.1">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>MarkBind - Server Side Rendering</title><link rel="stylesheet" href="/devdocs/markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="/devdocs/markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/devdocs/markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="/devdocs/markbind/css/octicons.css">
    <link rel="stylesheet" href="/devdocs/markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="/devdocs/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/devdocs/markbind/css/markbind.min.css"><script src="/devdocs/markbind/js/polyfill.min.js"></script>
    <script src="/devdocs/markbind/js/vue.min.js"></script>
    <script src="/devdocs/markbind/js/markbind.min.js"></script>
    <script src="serverSideRendering.page-vue-render.js"></script><link rel="stylesheet" href="/devdocs/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/devdocs/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/devdocs/css/main.css">
<link rel="icon" href="/devdocs/favicon.ico"></head>
<script>
  const baseUrl = '/devdocs'
</script>
<body  data-bs-spy="scroll" data-bs-target="#mb-page-nav" data-bs-offset="100" >
<div id="app" data-server-rendered="true"><header sticky=""><div data-v-73b4aa16><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-73b4aa16><div class="container-fluid" data-v-73b4aa16><div class="navbar-left" data-v-73b4aa16><a href="/devdocs/index.html" title="Home" class="navbar-brand" data-v-73b4aa16><img src="/devdocs/images/logo-darkbackground.svg" height="20" data-v-73b4aa16></a></div> <div class="navbar-default" data-v-73b4aa16><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-73b4aa16> <li data-v-73b4aa16><a highlight-on="exact" href="/devdocs/index.html" class="nav-link" data-v-73b4aa16>HOME</a></li> <div tags="environment--dg environment--combined" data-v-73b4aa16><li data-v-73b4aa16><a highlight-on="sibling-or-child" href="/devdocs/devGuide/index.html" class="nav-link" data-v-73b4aa16>DEVELOPER GUIDE</a></li></div> <li data-v-73b4aa16><a highlight-on="exact" href="/devdocs/showcase.html" class="nav-link" data-v-73b4aa16>SHOWCASE</a></li> <li data-v-73b4aa16><a highlight-on="exact" href="/devdocs/about.html" class="nav-link" data-v-73b4aa16>ABOUT</a></li> <li data-v-73b4aa16><a href="https://github.com/MarkBind/markbind" target="_blank" class="nav-link" data-v-73b4aa16><span data-v-73b4aa16><span aria-hidden="true" class="fab fa-github" data-v-73b4aa16></span></span></a></li></ul></div> <ul class="navbar-nav navbar-right" data-v-73b4aa16><li data-v-73b4aa16><form class="navbar-form" data-v-73b4aa16><div class="dropdown" style="position:relative;" data-v-01e11c9b><input data-bs-toggle="dropdown" type="text" placeholder="Search" autocomplete="off" value="" class="form-control" data-v-01e11c9b> <div class="form-control placeholder-div-hidden" data-v-01e11c9b>
      Search
    </div> <ul class="dropdown-menu search-dropdown-menu d-none dropdown-menu-end" data-v-01e11c9b></ul></div></form></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-73b4aa16><!----> <!----></div></div></header> <div id="flex-body"><nav id="site-nav" data-v-e6005420><div class="site-nav-top" data-v-e6005420><div class="fw-bold mb-2" style="font-size:1.25rem;" data-v-e6005420>Developer Guide</div></div> <div class="nav-component slim-scroll" data-v-e6005420><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/devdocs/devGuide/devGuide.html" data-v-e6005420>Contributing</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>Onboarding Bootcamp

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/bootcamp/intro.html" data-v-e6005420>Introduction</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/bootcamp/exploreMarkBind.html" data-v-e6005420>Explore MarkBind as a User</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/bootcamp/contributeToDocs.html" data-v-e6005420>Contribute to Documentation</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/bootcamp/fixABug.html" data-v-e6005420>Fix a Bug</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/bootcamp/implementAFeature.html" data-v-e6005420>Implement a New Feature</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>Development 

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/development/settingUp.html" data-v-e6005420>Setting up</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/development/workflow.html" data-v-e6005420>Workflow</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/development/writingComponents.html" data-v-e6005420>Writing Components</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/development/writingPlugins.html" data-v-e6005420>Writing Plugins</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/development/migratingToTypeScript.html" data-v-e6005420>Migrating to TypeScript</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/development/migratingNodeJs.html" data-v-e6005420>Migrating Node.js</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>Design 

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/design/projectStructure.html" data-v-e6005420>Project Structure</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/design/architecture.html" data-v-e6005420>Architecture</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/design/serverSideRendering.html" data-v-e6005420>Server Side Rendering</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>GitHub Actions

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/githubActions/overview.html" data-v-e6005420>Overview</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/githubActions/markbindAction.html" data-v-e6005420>markbind-action</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/githubActions/markbindReusableWorkflows.html" data-v-e6005420>markbind-reusable-workflows</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/devdocs/devGuide/projectManagement.html" data-v-e6005420>Project management</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>Appendices 

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/devdocs/devGuide/styleGuides.html" data-v-e6005420>Style guides</a></div></li></ul></li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper"><div data-v-ef898034><nav aria-label="breadcrumb" class="breadcrumb-divider" data-v-ef898034><ol class="breadcrumb" data-v-ef898034><li class="notlink breadcrumb-marker" data-v-ef898034>
        ››  
      </li> </ol></nav></div> <p><span id="title" class="d-none">Server Side Rendering</span></p> <h1 id="server-side-rendering">Server Side Rendering<a href="#server-side-rendering" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <div class="lead"><p>MarkBind uses Server-side Rendering (SSR) for its pages.</p> <p>To ensure SSR works properly, there are certain rules that developers should adhere to.</p> <p>This page will describe SSR in general and elaborate on the caveats that developers should take note of when contributing to MarkBind.</p></div> <h2 id="pre-requisite-knowledge">Pre-requisite Knowledge<a href="#pre-requisite-knowledge" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>To deal with SSR, it is important to first have a good understanding of two things:</p> <ol><li>Vue</li> <li>MarkBind's Packages</li></ol> <h3 id="understanding-vue">Understanding Vue<a href="#understanding-vue" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Here is a short list of questions to check your understanding of Vue:</p> <ul><li>What is a Vue instance?</li> <li>What does it mean to compile Vue?</li> <li>What are render functions?</li> <li>Are there any differences between compiling Vue on client-side versus server-side?</li> <li>What is the difference between compiling and rendering?</li></ul> <div class="alert box-container seamless d-flex" data-v-4d146e2c><div class="d-flex" data-v-4d146e2c><div class="icon-wrapper  text-info" data-v-4d146e2c><i class="fas fa-info" data-v-4d146e2c></i></div> <div aria-hidden="true" class="vertical-divider alert-info" data-v-4d146e2c></div></div> <div class="header-and-body" data-v-4d146e2c><div class="box-header-wrapper" data-v-4d146e2c><!----> <div class="box-header" data-v-4d146e2c><h5 id="useful-resources-to-understand-vue-better" data-v-4d146e2c>Useful Resources to understand Vue better<a href="#useful-resources-to-understand-vue-better" onclick="event.stopPropagation()" class="fa fa-anchor" data-v-4d146e2c></a></h5></div> <!----></div> <div class="box-body-wrapper box-body-wrapper-with-heading" data-v-4d146e2c><!----> <!----> <div class="contents" data-v-4d146e2c> <p data-v-4d146e2c>If there are any doubts regarding the questions above, here are some good resources to refer to:</p> <ul data-v-4d146e2c><li data-v-4d146e2c><a href="https://vuejs.org/v2/guide" data-v-4d146e2c>Vue Official Documentation</a></li> <li data-v-4d146e2c><a href="https://www.youtube.com/watch?v=wZN_FtZRYC8&amp;ab_channel=LaraconEU" data-v-4d146e2c>Evan You - Inside Vue Components - Laracon EU 2017</a></li></ul></div> <!----></div></div></div> <h3 id="understanding-markbind-s-packages">Understanding MarkBind's Packages<a href="#understanding-markbind-s-packages" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>There are four packages in MarkBind's codebase:</p> <ol><li>cli</li> <li>core</li> <li>core-web</li> <li>vue-components</li></ol> <p>You may refer to MarkBind's <a href="/devdocs/devGuide/design/projectStructure.html">project structure</a> to get a better understanding of how the packages work together.</p> <h2 id="what-is-server-side-rendering-and-why">What is Server-side Rendering and Why?<a href="#what-is-server-side-rendering-and-why" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>In MarkBind's context, SSR refers to the generation of proper HTML strings from Vue components on the server (core library) instead of shifting that responsibility to the client-side (browser).</p> <p>The main motivation that we had for introducing SSR into MarkBind is to enhance user experience by resolving the unsightly issue of Flash-of-Unstyled-Content (FOUC), which occurs due to our reliance on Client-side Rendering (CSR).</p> <h2 id="client-side-hydration">Client-side Hydration<a href="#client-side-hydration" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>SSR and Client-side Hydration are 2 concepts that go hand-in-hand. Essentially, once we produce the static HTML via SSR and send it over to the client-side, Vue on the client-side will execute what is known as Client-side Hydration on the static HTML.</p> <p>During the hydration process, Vue essentially compares your SSR HTML markup against the virtual DOM generated by the render function on the client-side. If any difference is found, meaning that the application that we have on the client-side (the virtual DOM tree) differs from the SSR HTML mark-up that we send to the client, Vue will reject the SSR HTML output, bail Client-side Hydration, and execute full CSR.</p> <p>This is known as &quot;Hydration Issue&quot; and it is one of the main challenges you will face with SSR in MarkBind.</p> <div class="alert box-container seamless d-flex" data-v-4d146e2c><div class="d-flex" data-v-4d146e2c><div class="icon-wrapper  text-warning" data-v-4d146e2c><i class="fas fa-exclamation" data-v-4d146e2c></i></div> <div aria-hidden="true" class="vertical-divider alert-warning" data-v-4d146e2c></div></div> <div class="header-and-body" data-v-4d146e2c><div class="box-header-wrapper" data-v-4d146e2c><!----> <div class="box-header" data-v-4d146e2c><h4 id="using-production-build" data-v-4d146e2c>Using production build<a href="#using-production-build" onclick="event.stopPropagation()" class="fa fa-anchor" data-v-4d146e2c></a></h4></div> <!----></div> <div class="box-body-wrapper box-body-wrapper-with-heading" data-v-4d146e2c><!----> <!----> <div class="contents" data-v-4d146e2c> <p data-v-4d146e2c>In production build, Vue does not perform hydration check. Any errors resulting from hydration will trigger full CSR without warning. MarkBind <strong data-v-4d146e2c>uses the development build by default</strong> when you serve it in development mode (<code class="hljs inline no-lang" data-v-4d146e2c>-d</code> option).</p></div> <!----></div></div></div> <h2 id="penalties-of-hydration-issue">Penalties of Hydration Issue<a href="#penalties-of-hydration-issue" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>When hydration fails, on top of the wasted time and effort in executing SSR, we will also incur the additional time penalty of executing Client-side Hydration (where CSR will follow afterwards).</p> <p>Fortunately, even if we face hydration issues and execute full CSR, the FOUC problem will still be resolved nonetheless. The reason for this is because the SSR HTML markup should resemble the CSR HTML markup to a large extent.</p> <p>Supposedly, hydration issues typically occurs due to minor differences between client-side rendered virtual DOM tree and the server-rendered content. Of course, this is assuming that we are adhering to the concept of &quot;universal application&quot; as much as possible, which will be explained in the following section.</p> <h2 id="avoiding-hydration-issue">Avoiding Hydration Issue<a href="#avoiding-hydration-issue" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Conceptually, to prevent hydration issue, what we should always strive to achieve is a &quot;universal application&quot;.</p> <p>It is not difficult to achieve a &quot;universal application&quot; per-se because we merely have to ensure two things:</p> <ol><li>the initial state is the same between client-side and server-side.</li> <li>after compiling and rendering the Vue page application, the SSR HTML mark-up is not modified.</li></ol> <p>Beyond achieving a &quot;universal application&quot;, note that the HTML specifications should also be adhered to.</p> <p>Some common mistakes are as such:</p> <ul><li>Having block-level elements within <code class="hljs inline no-lang">&lt;p&gt;</code> tag</li> <li>Having unknown HTML elements within our Vue application during compilation/rendering (though this can be easily resolved by adding <code class="hljs inline no-lang">v-pre</code> to the unknown element, so that Vue will ignore that element during compilation).</li></ul> <div class="alert box-container seamless" data-v-4d146e2c><!----> <div class="header-and-body" data-v-4d146e2c><!----> <div class="box-body-wrapper" data-v-4d146e2c><div class="icon-wrapper  text-success" data-v-4d146e2c><i class="fas fa-check" data-v-4d146e2c></i></div> <div aria-hidden="true" class="vertical-divider alert-success" data-v-4d146e2c></div> <div class="contents" data-v-4d146e2c><p data-v-4d146e2c>If you are unsure what elements are allowed within other elements, or what constitutes invalid HTML in general, a good resource to reference would be the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span" data-v-4d146e2c>MDN Web Docs</a>.</p></div> <!----></div></div></div> <p>Note that the list only included the common causes of hydration issue that MarkBind developers have ran into. There may be other causes of hydration issue that are not listed here (although unlikely).</p> <div class="clearfix"><p><span class="float-start"><a href="/devdocs/devGuide/design/architecture.html" class="btn btn-light"><span><span aria-hidden="true" class="far fa-arrow-alt-circle-left"></span> <span>Architecture</span></span></a></span></p> <p><span class="float-end"><a href="/devdocs/devGuide/githubActions/overview.html" class="btn btn-light"><span><span>GitHub Actions: Overview</span> <span aria-hidden="true" class="far fa-arrow-alt-circle-right"></span></span></a></span></p></div> <br></div> <nav id="page-nav" data-v-e6005420><div class="nav-component slim-scroll" data-v-e6005420><nav id="mb-page-nav" class="nav nav-pills flex-column my-0 small no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#server-side-rendering" data-v-e6005420>Server Side Rendering‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#pre-requisite-knowledge" data-v-e6005420>Pre-requisite Knowledge‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#understanding-vue" data-v-e6005420>Understanding Vue‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#useful-resources-to-understand-vue-better" data-v-e6005420>Useful Resources to understand Vue better‎</a></nav> <a class="nav-link py-1" href="#understanding-markbind-s-packages" data-v-e6005420>Understanding MarkBind's Packages‎</a></nav> <a class="nav-link py-1" href="#what-is-server-side-rendering-and-why" data-v-e6005420>What is Server-side Rendering and Why?‎</a> <a class="nav-link py-1" href="#client-side-hydration" data-v-e6005420>Client-side Hydration‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#using-production-build" data-v-e6005420>Using production build‎</a></nav> <a class="nav-link py-1" href="#penalties-of-hydration-issue" data-v-e6005420>Penalties of Hydration Issue‎</a> <a class="nav-link py-1" href="#avoiding-hydration-issue" data-v-e6005420>Avoiding Hydration Issue‎</a></nav> <!----></nav></div> <!----></nav> <div aria-hidden="true" class="scroll-top-button fa-lg d-print-none" style="display:none;bottom:2%;right:2%;position:fixed;"><i class="fas fa-arrow-circle-up"></i></div></div> <div><footer><div class="text-center"><small>[Generated by <a href="https://markbind.org/">MarkBind 5.0.1</a> on Sun, 30 Jul 2023, 5:48:14 UTC]</small><br> <small>This site is powered by <a href="https://www.netlify.com/">Netlify</a>.</small></div></footer></div></div>
</body><script src="/devdocs/markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
    <script>
    function copyCodeBlock(element) {
        const pre = element.parentElement.parentElement;
        const codeElement = pre.querySelector('code');

        // create dummy text element to select() the text field
        const textElement = document.createElement('textarea');
        textElement.value = codeElement.textContent;
        document.body.appendChild(textElement);
        textElement.select();

        document.execCommand('copy');
        document.body.removeChild(textElement);
    }
    </script>
</html>
