<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 3.0.6">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MarkBind - Architecture</title>
    <link rel="stylesheet" href="../../markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../markbind/css/bootstrap-vue.min.css">
    <link rel="stylesheet" href="../../markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="../../markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="../../markbind/css/octicons.css">
    <link rel="stylesheet" href="../../markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="../../markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="../../markbind/css/markbind.min.css"><script src="../../markbind/js/polyfill.min.js"></script>
    <script src="../../markbind/js/vue.min.js"></script>
    <script src="../../markbind/js/markbind.min.js"></script>
    <script src="architecture.page-vue-render.js"></script>
    <script src="../../markbind/js/jquery.min.js"></script><link rel="stylesheet" href="/devdocs/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css">
    
  <link rel="stylesheet" href="/devdocs/css/main.css">
<link rel="icon" href="/devdocs/favicon.ico"></head>
<script>
  const baseUrl = '/devdocs'
</script>
<body  data-spy="scroll" data-target="#mb-page-nav" data-offset="100" >
<div id="app" data-server-rendered="true"><div><header fixed=""><div data-v-15113a2f><nav class="navbar navbar-expand-md navbar-dark bg-dark" data-v-15113a2f><div class="container-fluid" data-v-15113a2f><div class="navbar-left" data-v-15113a2f><a href="/devdocs/index.html" title="Home" class="navbar-brand" data-v-15113a2f><img src="/devdocs/images/logo-darkbackground.svg" height="20" data-v-15113a2f></a></div> <div class="navbar-default" data-v-15113a2f><ul class="navbar-nav mr-auto mt-2 mt-lg-0" data-v-15113a2f> <li data-v-15113a2f><a highlight-on="exact" href="/devdocs/index.html" class="nav-link" data-v-15113a2f>HOME</a></li> <div tags="environment--dg" data-v-15113a2f><li data-v-15113a2f><a highlight-on="sibling-or-child" href="/devdocs/devGuide/index.html" class="nav-link" data-v-15113a2f>DEVELOPER GUIDE</a></li></div> <li data-v-15113a2f><a highlight-on="exact" href="/devdocs/showcase.html" class="nav-link" data-v-15113a2f>SHOWCASE</a></li> <li data-v-15113a2f><a highlight-on="exact" href="/devdocs/about.html" class="nav-link" data-v-15113a2f>ABOUT</a></li> <li data-v-15113a2f><a href="https://github.com/MarkBind/markbind" target="_blank" class="nav-link" data-v-15113a2f><span data-v-15113a2f><span aria-hidden="true" class="fab fa-github" data-v-15113a2f></span></span></a></li></ul></div> <ul class="navbar-nav navbar-right" data-v-15113a2f><li data-v-15113a2f><form class="navbar-form" data-v-15113a2f><div style="position:relative;"><input type="text" placeholder="Search" autocomplete="off" value="" class="form-control"> <ul class="dropdown-menu search-dropdown-menu dropdown-menu-right"></ul></div></form></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-15113a2f><!----> <!----></div></div></header></div> <div id="flex-body"><nav id="site-nav" class="fixed-header-padding" data-v-e8c82f88><div class="site-nav-top" data-v-e8c82f88><div class="font-weight-bold mb-2" style="font-size:1.25rem;" data-v-e8c82f88>Developer Guide</div></div> <div class="nav-component slim-scroll" data-v-e8c82f88><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88><a href="/devdocs/devGuide/devGuide.html" data-v-e8c82f88>Contributing</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88><a href="/devdocs/devGuide/settingUp.html" data-v-e8c82f88>Setting up</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88><a href="/devdocs/devGuide/workflow.html" data-v-e8c82f88>Workflow</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Design 

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/devdocs/devGuide/design/projectStructure.html" data-v-e8c82f88>Project Structure</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/devdocs/devGuide/design/architecture.html" data-v-e8c82f88>Architecture</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/devdocs/devGuide/design/serverSideRendering.html" data-v-e8c82f88>Server Side Rendering</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88><a href="/devdocs/devGuide/writingPlugins.html" data-v-e8c82f88>Writing Plugins</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88><a href="/devdocs/devGuide/projectManagement.html" data-v-e8c82f88>Project management</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Appendices 

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/devdocs/devGuide/styleGuides.html" data-v-e8c82f88>Style guides</a></div></li></ul></li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper" class="fixed-header-padding"><p><span id="title" class="d-none">Architecture</span></p> <h1 id="architecture"><span id="architecture" class="anchor"></span>Architecture<a href="#architecture" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <div class="lead mb-5"><p>This page provides an overview of the MarkBind's architecture.</p></div> <p><a href="/devdocs/images/dev%20diagrams/architecture.png" target="_self"><img src="/devdocs/images/dev%20diagrams/architecture.png" alt="" class="img-fluid"></a></p> <p>The above diagram shows the key classes and <span data-mb-component-type="popover" class="trigger"><span data-mb-slot-name="content">The content processing flow acts on a <strong>single</strong> source file (<code class="hljs inline no-lang">.md</code> / <code class="hljs inline no-lang">.mbd</code> / <code class="hljs inline no-lang">.html</code>), generating output files or intermediate processing results depending on the content type.</span>content processing flow</span> in MarkBind. You may note the following from these:</p> <h3 id="key-classes"><span id="key-classes" class="anchor"></span>Key classes<a href="#key-classes" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The 3 key classes representing different types of content are as follows:</p> <ol><li><p><code class="hljs inline no-lang">Page</code> — a page, as specified by the user in their various site configuration <code class="hljs inline no-lang">glob</code> or <code class="hljs inline no-lang">src</code> properties. These are directly managed by the <code class="hljs inline no-lang">Site</code> instance.</p></li> <li><p><code class="hljs inline no-lang">Layout</code> — a single layout file, as contained in the <code class="hljs inline no-lang">_markbind/layouts</code> folder, collectively managed by <code class="hljs inline no-lang">LayoutManager</code>.</p> <div class="alert box-container seamless" data-v-7d17494f><!----> <div class="header-and-body" data-v-7d17494f><!----> <div class="box-body-wrapper" data-v-7d17494f><div class="icon-wrapper  text-success" data-v-7d17494f><i class="fas fa-lightbulb" data-v-7d17494f></i></div> <div aria-hidden="true" class="vertical-divider alert-success" data-v-7d17494f></div> <div class="contents" data-v-7d17494f>Note that `Layout` instances do not generate any output files directly, but rather, they store intermediate processing results to be used in a `Page`.</div> <!----></div></div></div></li> <li><p><code class="hljs inline no-lang">External</code> — source files referenced in a <code class="hljs inline no-lang">Page</code>, <code class="hljs inline no-lang">Layout</code> or even another <code class="hljs inline no-lang">External</code> that result in a <span data-mb-component-type="tooltip" class="trigger"><span data-mb-slot-name="_content">hence the class naming <code class="hljs inline no-lang">External</code></span><strong>separate</strong></span> output file. These output files are loaded dynamically and on-demand in the browser. These instances are managed by a single <code class="hljs inline no-lang">ExternalManager</code> instance.</p></li></ol> <div class="alert box-container seamless" data-v-7d17494f><!----> <div class="header-and-body" data-v-7d17494f><!----> <div class="box-body-wrapper" data-v-7d17494f><div class="icon-wrapper  text-info" data-v-7d17494f><i class="fas fa-info" data-v-7d17494f></i></div> <div aria-hidden="true" class="vertical-divider alert-info" data-v-7d17494f></div> <div class="contents" data-v-7d17494f><p data-v-7d17494f>For example, the file referenced by a <code class="hljs inline no-lang" data-v-7d17494f>&lt;panel src=&quot;xx.md&quot;&gt;</code> generates a separate <code class="hljs inline no-lang" data-v-7d17494f>xx._include_.html</code>, which is requested and loaded only when the panel is expanded.</p></div> <!----></div></div></div> <h3 id="content-processing-flow"><span id="content-processing-flow" class="anchor"></span>Content processing flow<a href="#content-processing-flow" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Every <code class="hljs inline no-lang">Page</code>, <code class="hljs inline no-lang">Layout</code> and <code class="hljs inline no-lang">External</code> follows the same overall content processing flow, that is:</p> <p><em>Nunjucks <span aria-hidden="true" class="fas fa-arrow-right"></span> Markdown <span aria-hidden="true" class="fas fa-arrow-right"></span> Html</em></p> <div class="alert box-container seamless" data-v-7d17494f><!----> <div class="header-and-body" data-v-7d17494f><!----> <div class="box-body-wrapper" data-v-7d17494f><div class="icon-wrapper  text-info" data-v-7d17494f><i class="fas fa-info" data-v-7d17494f></i></div> <div aria-hidden="true" class="vertical-divider alert-info" data-v-7d17494f></div> <div class="contents" data-v-7d17494f><p data-v-7d17494f>Note that generation of <code class="hljs inline no-lang" data-v-7d17494f>External</code>s (e.g. <code class="hljs inline no-lang" data-v-7d17494f>&lt;panel src=&quot;...&quot;&gt;</code>) <strong data-v-7d17494f>do not fall within</strong> the content processing flow <span class="underline" data-v-7d17494f>where they are <strong data-v-7d17494f>referenced</strong></span>.
These are only flagged for generation, and then processed by <code class="hljs inline no-lang" data-v-7d17494f>ExternalManager</code> <strong data-v-7d17494f>after</strong>, in <strong data-v-7d17494f>another</strong> similar content processing flow within an <code class="hljs inline no-lang" data-v-7d17494f>External</code> instance.</p></div> <!----></div></div></div> <p><strong><strong>Rationale</strong></strong></p> <p>This simple three stage flow provides a simple, predictable content processing flow for the user, and removes several other development concerns:</p> <ol><li><p>As the templating language of choice, Nunjucks is always processed first, allowing its templating capabilities to be used to the full extent.
Its syntax is also the most compatible and independent of the other stages.</p></li> <li><p>Secondly, Markdown is <strong>rendered before html</strong>, which produces more html. This also allows core Markdown features (e.g. code blocks) and Markdown plugins with eccentric syntaxes to be used without having to patch the html parser.</p></li> <li><p>Having processed possibly conflicting Nunjucks and Markdown syntax, Html is then processed last.</p></li></ol> <i id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true" class="fa fa-arrow-circle-up fa-lg d-print-none"></i></div> <nav id="page-nav" class="fixed-header-padding" data-v-e8c82f88><div class="nav-component slim-scroll" data-v-e8c82f88><nav id="mb-page-nav" class="nav nav-pills flex-column my-0 small no-flex-wrap" data-v-e8c82f88><a href="#architecture" class="nav-link py-1" data-v-e8c82f88>Architecture‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e8c82f88><a href="#key-classes" class="nav-link py-1" data-v-e8c82f88>Key classes‎</a> <a href="#content-processing-flow" class="nav-link py-1" data-v-e8c82f88>Content processing flow‎</a></nav> <!----></nav></div> <!----></nav></div> <div><footer><div class="text-center"><small>[Generated by <a href="https://markbind.org/">MarkBind 3.0.6</a> on Wed, Dec 29, 2021, 8:15:12 AM UTC]</small><br> <small>This site is powered by <a href="https://www.netlify.com/">Netlify</a>.</small></div></footer></div></div>
</body><script src="../../markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
